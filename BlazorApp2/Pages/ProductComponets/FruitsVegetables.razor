@page "/fruits-vegetables"
@layout BlazorApp2.Shared.ProductsLayout
@using ModelsClassLibrary.Models
@inject BlazorApp2.Services.ApiServices apiServices

<div class="container-fluid">
    <div class="row">
        <div class="d-flex">

            <ProductsFilter OnFilterCategory=OnFilterCategoryAsync
                            receviedCategories=receviedCategories
                            receviedcategoryIntArray=receviedcategoryIntArray
                            FilterTheProductsAsync=FilterTheProductsAsync />

            <div>
                <div class="container">
                    <ProductsChipSearch receviedCategories=receviedCategories
                                        DeleteChipSetAsync=DeleteChipSetAsync
                                        SearchTextEnter=FilterOnSearchText
                                        loader=SearchLoader
                                        ClearFilters=ClearFilters />

                </div>
                <div class="container">
                    <div class="row flex-wrap justify-content-center">
                        <div class="d-flex justify-content-center my-2">
                            <MudPagination Color="Color.Primary" Count="@numberOfPages" SelectedChanged="@OnPageIndexChange" />
                        </div>

                        @if (error){
                               <MudText Typo="Typo.h1" Color="Color.Error">@statusCodeError</MudText>
                        }else if (Products.Count == 0)
                        {
                            <BlazorApp2.Pages.UIComponents.Spinner Height="80vh" />
                        }
                        else
                        {
                            @foreach (var product in Products)
                            {
                                <ProductPurchaseCard product=product OnFilterCategory=OnFilterCategoryAsync /> 
                            }
                        }
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>



@code {

    }
